\section{Обзор существующих решений}
\label{sec:Chapter2} \index{Chapter2}

% Здесь надо рассмотреть все существующие решения поставленной задачи, но не
% просто пересказать, в чем там дело, а оценить степень их соответствия тем
% ограничениям, которые были сформулированы в постановке задачи.

Меры для борьбы с гонками уже принимаются в современных системах сборки. Например, система Bazel создаёт песочницу --- виртуальную файловую систему, отдельную для каждой цели. В этой песочнице есть только те файлы, которые соответствуют зависимостям этой цели сборки \cite{bazel-sandbox}. С таким ограничением любая схема обязана иметь все необходимые зависимости, чтобы успешно собраться. Однако, подобные системы пока не заместили собой стандартные, более простые утилиты, такие как Make и Ninja. Последние по-прежнему широко используются в современных проектах как непосредственно, так и в виде бекэнда для других, более высокоуровневых систем.

Для сборок на основе Make в настоящее время существует единственное решение поставленной проблемы --- флаг \texttt{{-}{-}shuffle}, добавленный в GNU Make 4.4 в 2022 году \cite{trofi-make-shuffle}. Принцип его работы заключается в случайной перестановке порядка сборки независимых целей. Такой подход увеличивает вероятность того, что существующая гонка проявится и приведёт к сбою. Полученная ошибка может помочь разработчику найти и исправить гонку.

Это решение легко встраивается в существующие проекты посредством добавления флага \texttt{{-}{-}shuffle} в аргументы Make или в переменную окружения \texttt{GNUMAKEFLAGS}. Если окружение не позволяет указывать переменные окружения или параметры командной строки, можно применить патч для Make \cite{make-shuffle-patch}, активирующий режим \texttt{{-}{-}shuffle} по умолчанию.

Однако, в основе режима Make \texttt{{-}{-}shuffle} лежит случайный алгоритм. Это значит, что разработчику, вероятно, придётся полностью пересобрать проект много раз, прежде чем гонка себя проявит. Кроме этого, это решение имеет ограничение в том, что не может обнаружить гонки, проявляющиеся только при параллельном выполнении целей. Распространённая причина появления таких гонок заключается в том, что несколько независимых целей используют временный файл по одному и тому же пути. Это может привести к ошибке или к повреждению данных, если эти цели будут собираться одновременно. Далее в этой работе такой вид гонок будет отнесён к классу "Гонки на пути к файлу". Режим \texttt{{-}{-}shuffle} утилиты \texttt{Make} не помогает обнаружить гонки этого класса. Он нацелен на изменение порядка сборки целей, и это не позволяет проверить, может ли любой поднабор независимых целей работать одновременно без конфликтов.